{"openapi":"3.0.0","info":{"title":"Petshop API","version":"1.0.0","description":"API para o laboratório de Hadoop com um petshop. Antes de mais nada, é necessário criar uma organização através do convite fornecido previamente, após a criação da organização você receberá uma chave de API (ApiKey) para autenticar suas solicitações. O acesso à API é protegido pela chave de API (ApiKey), garantindo que apenas usuários autorizados possam interagir com os recursos do sistema.\n\n---\n\n**Base URL (Produção):** `/api/v1/`\n**Swagger JSON:** [api-docs.json](/api-docs.json)\n\n"},"servers":[{"url":"http://localhost:3000/api/v1","description":"Servidor de desenvolvimento - v1"},{"url":"https://julio471-inf332-hackaton-petshop.hf.space/api/v1","description":"Servidor de Produção - v1"}],"components":{"schemas":{"PaginatedResponse":{"type":"object","properties":{"data":{"type":"array","description":"Array of items"},"pagination":{"type":"object","properties":{"page":{"type":"integer","description":"The current page number"},"pageSize":{"type":"integer","description":"Number of items per page"},"total":{"type":"integer","description":"Total number of items"}}}}},"Error":{"type":"object","properties":{"message":{"type":"string","description":"Mensagem de erro"},"statusCode":{"type":"integer","description":"Tipo do erro"}},"example":{"message":"Recurso não encontrado","statusCode":500}},"ApiKey":{"type":"object","properties":{"organization_id":{"type":"integer"},"api_key":{"type":"string"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"}},"example":{"organization_id":1,"api_key":"apikey-1234567890","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}},"Batch":{"type":"object","properties":{"execution_id":{"type":"integer"},"target_table":{"type":"string"},"start_time":{"type":"string","format":"date-time"},"end_time":{"type":"string","format":"date-time","nullable":true},"status":{"type":"string","enum":["RUNNING","FAILED","COMPLETED"]},"error_message":{"type":"string","nullable":true},"records_processed":{"type":"integer","nullable":true}},"example":{"execution_id":1,"target_table":"vaccine_recommendation","start_time":"2025-11-03T20:12:27.362Z","end_time":"2025-11-03T20:12:38.377Z","status":"COMPLETED","error_message":null,"records_processed":null}},"Organization":{"type":"object","required":["name","social_name","description","identification_code"],"properties":{"organization_id":{"type":"integer","description":"The auto-generated id of the organization."},"name":{"type":"string","description":"The name of the organization."},"social_name":{"type":"string","description":"The social name of the organization."},"description":{"type":"string","description":"The description of the organization."},"identification_code":{"type":"string","description":"The identification code of the organization."},"links":{"type":"array","items":{"type":"string"}},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"}},"example":{"organization_id":1,"name":"PetCare","social_name":"PetCare Serviços Veterinários Ltda","description":"Clínica veterinária especializada em cuidados para pets.","identification_code":"12345678000199","links":["http://localhost:3000","https://juliocesar82.github.io/unicamp-petshop-startup"],"dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}},"Pet":{"type":"object","required":["name","species","animal_type"],"properties":{"pet_id":{"type":"integer"},"tutor_id":{"type":"integer"},"name":{"type":"string"},"image_path":{"type":"string","nullable":true},"birth_date":{"type":"string","format":"date-time"},"ignore_recommendation":{"type":"boolean"},"species":{"type":"string"},"animal_type":{"type":"string"},"fur_type":{"type":"string"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"}},"example":{"pet_id":1,"tutor_id":1,"name":"Ana Carolina","image_path":null,"birth_date":"2025-11-03T03:00:00.000Z","ignore_recommendation":false,"species":"Cão","animal_type":"Golden Retriever","fur_type":"Longo","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true,"email":"ana.carolina@email.com","phone":"55 91234-5678","organization_id":1}},"Tutor":{"type":"object","required":["name","email","phone"],"properties":{"tutor_id":{"type":"integer","description":"The auto-generated id of the tutor."},"name":{"type":"string","description":"The name of the tutor."},"email":{"type":"string","description":"The email of the tutor."},"phone":{"type":"string","description":"The phone number of the tutor."},"organization_id":{"type":"integer"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"}},"example":{"tutor_id":1,"name":"Ana Carolina","email":"ana.carolina@email.com","phone":"55 91234-5678","organization_id":1,"dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}}},"securitySchemes":{"ApiKeyAuth":{"type":"apiKey","in":"header","name":"x-api-key"}}},"security":[{"ApiKeyAuth":[]}],"paths":{"/apikeys":{"post":{"summary":"Create a new API key for the authenticated organization","tags":["ApiKeys"],"responses":{"201":{"description":"The API key was successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ApiKey"},"example":{"organization_id":1,"api_key":"82607b06600fda41925c51aafdbd1a2cb7952e3a3c4650f0364bf25810ed327c","dcreated":"2025-11-03T21:07:42.321Z","dlastupdate":"2025-11-03T21:07:42.321Z","nenabled":true}}}},"400":{"description":"Erro de validação","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Não autorizado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Acesso proibido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}},"get":{"summary":"Get all API keys for the authenticated organization","tags":["ApiKeys"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of API keys","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponse"},{"type":"object","properties":{"data":{"items":{"$ref":"#/components/schemas/ApiKey"}}}}]},"example":{"data":[{"organization_id":1,"api_key":"apikey-1234567890","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}],"pagination":{"page":1,"pageSize":10,"total":1}}}}},"400":{"description":"Erro de validação","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Não autorizado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Acesso proibido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/apikeys/{api_key}":{"delete":{"summary":"Delete an API key","tags":["ApiKeys"],"parameters":[{"in":"path","name":"api_key","schema":{"type":"string"},"required":true,"description":"The API key to delete"}],"responses":{"204":{"description":"The API key was deleted"},"404":{"description":"The API key was not found"},"500":{"description":"Some server error"}}}},"/batch/{entity}":{"post":{"summary":"Start a job for a given entity","tags":["Batch"],"parameters":[{"in":"path","name":"entity","schema":{"type":"string","enum":["vaccine-recommendation","booking-reference","booking-recommendation","ltv-by-pet-profile"]},"required":true,"description":"The entity to process"}],"responses":{"202":{"description":"Job started","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Batch"}}}},"500":{"description":"Some server error"}}}},"/batch/{id}/status":{"get":{"summary":"Get job status by ID","tags":["Batch"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The job ID"}],"responses":{"200":{"description":"Job status","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Batch"}}}},"500":{"description":"Some server error"}}}},"/batch/{id}/result":{"get":{"summary":"Get job result by ID","tags":["Batch"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The job ID"}],"responses":{"200":{"description":"Job result"},"500":{"description":"Some server error"}}}},"/batch/ltv-by-pet-profile":{"get":{"summary":"Get LTV by pet profile","tags":["Batch"],"responses":{"200":{"description":"LTV by pet profile","content":{"application/json":{"schema":{"type":"array","items":{"type":"object","properties":{"ltv_by_pet_profile_id":{"type":"integer"},"species":{"type":"string"},"animal_type":{"type":"string"},"fur_type":{"type":"string"},"total_value":{"type":"string"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"}}}},"example":[{"ltv_by_pet_profile_id":1,"species":"Cão","animal_type":"Golden Retriever","fur_type":"Longo","total_value":"527.50","dcreated":"2025-11-03T20:43:33.786Z","dlastupdate":"2025-11-03T20:43:33.786Z","nenabled":true},{"ltv_by_pet_profile_id":2,"species":"Cão","animal_type":"Shih Tzu","fur_type":"Longo","total_value":"251.00","dcreated":"2025-11-03T20:43:33.864Z","dlastupdate":"2025-11-03T20:43:33.864Z","nenabled":true},{"ltv_by_pet_profile_id":3,"species":"Gato","animal_type":"Siamês","fur_type":"Curto","total_value":"527.50","dcreated":"2025-11-03T20:43:33.935Z","dlastupdate":"2025-11-03T20:43:33.935Z","nenabled":true}]}}},"500":{"description":"Some server error"}}}},"/organization":{"post":{"summary":"Create a new organization","tags":["Organizations"],"security":[],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","social_name","description","identification_code","invite_code"],"properties":{"name":{"type":"string"},"social_name":{"type":"string"},"description":{"type":"string"},"identification_code":{"type":"string"},"invite_code":{"type":"string"}},"example":{"name":"PetShop Feliz","social_name":"PetShop Feliz LTDA","description":"O melhor para o seu pet.","identification_code":"12345678000199","invite_code":"super-secret-invite-code"}}}}},"responses":{"201":{"description":"The organization was successfully created","content":{"application/json":{"schema":{"type":"object","properties":{"organization_id":{"type":"integer"},"name":{"type":"string"},"social_name":{"type":"string"},"description":{"type":"string"},"identification_code":{"type":"string"},"apiKey":{"type":"string"}},"example":{"organization_id":1,"name":"PetShop Feliz","social_name":"PetShop Feliz LTDA","description":"O melhor para o seu pet.","identification_code":"12345678000199","apiKey":"a1b2c3d4e5f6..."}}}}},"400":{"description":"Invalid or expired invite code"},"500":{"description":"Some server error"}}},"get":{"summary":"Get the organization","tags":["Organizations"],"responses":{"200":{"description":"The organization description","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"},"example":{"organization_id":1,"name":"PetCare","social_name":"PetCare Serviços Veterinários Ltda","description":"Clínica veterinária especializada em cuidados para pets.","identification_code":"12345678000199","links":["http://localhost:3000","https://juliocesar82.github.io/unicamp-petshop-startup"],"dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}}}},"404":{"description":"The organization was not found"}}},"delete":{"summary":"Disable the organization","tags":["Organizations"],"responses":{"200":{"description":"The organization was successfully disabled","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Organization"}}}},"404":{"description":"The organization was not found or already disabled"}}}},"/pet/createWithList":{"post":{"summary":"Creates list of pets with given input array","tags":["Pets"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Pet"}}}}},"responses":{"201":{"description":"The list of pets was successfully created."},"400":{"description":"Erro de validação","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Não autorizado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Acesso proibido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}}},"/pet":{"post":{"summary":"Create a new pet","tags":["Pets"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"},"example":{"name":"Bolinha","species":"Cão","animal_type":"Pug","fur_type":"Curto","birth_date":"2022-01-15","tutor_id":1}}}},"responses":{"201":{"description":"The pet was successfully created.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"}}}},"500":{"description":"Some server error"}}},"get":{"summary":"Finds Pets by species, animal_type or fur_type","tags":["Pets"],"parameters":[{"in":"query","name":"species","schema":{"type":"string","enum":["Cão","Gato"]},"description":"The species of the pet"},{"in":"query","name":"animal_type","schema":{"type":"string"},"description":"The animal type of the pet"},{"in":"query","name":"fur_type","schema":{"type":"string"},"description":"The fur type of the pet"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of pets.","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponse"},{"type":"object","properties":{"data":{"items":{"$ref":"#/components/schemas/Pet"}}}}]},"example":{"data":[{"pet_id":1,"tutor_id":1,"name":"Bidu","image_path":"https://res.cloudinary.com/ddq4phlks/image/upload/v1762203761/pet-images/pet1-image.png","birth_date":"2025-11-03T03:00:00.000Z","ignore_recommendation":false,"species":"Cão","animal_type":"Golden Retriever","fur_type":"Longo","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T21:02:40.293Z","nenabled":true,"tutor_name":"Ana Carolina"},{"pet_id":3,"tutor_id":2,"name":"Thor","image_path":null,"birth_date":"2025-07-03T03:00:00.000Z","ignore_recommendation":false,"species":"Cão","animal_type":"Shih Tzu","fur_type":"Longo","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true,"tutor_name":"Bruno Martins"}],"pagination":{"page":1,"pageSize":10,"total":2}}}}},"500":{"description":"Some server error"}}}},"/pet/{id}/uploadImage":{"put":{"summary":"Uploads an image to a pet","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"requestBody":{"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"image":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"Image uploaded successfully.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"},"example":{"pet_id":1,"tutor_id":1,"name":"Ana Carolina","image_path":"https://res.cloudinary.com/ddq4phlks/image/upload/v1762203761/pet-images/pet1-image.png","birth_date":"2025-11-03T03:00:00.000Z","ignore_recommendation":false,"species":"Cão","animal_type":"Golden Retriever","fur_type":"Longo","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true,"email":"ana.carolina@email.com","phone":"55 91234-5678","organization_id":1}}}},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}}},"/pet/{id}":{"put":{"summary":"Update an existing pet","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"}}}},"responses":{"200":{"description":"The pet was successfully updated.","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"}}}},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}},"delete":{"summary":"Deletes a pet by ID","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"responses":{"204":{"description":"The pet was successfully deleted."},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}},"get":{"summary":"Get a pet by ID","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"responses":{"200":{"description":"The pet description by id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Pet"},"example":{"pet_id":1,"tutor_id":1,"name":"Bidu","image_path":"https://res.cloudinary.com/ddq4phlks/image/upload/v1762203761/pet-images/pet1-image.png","birth_date":"2025-11-03T03:00:00.000Z","ignore_recommendation":false,"species":"Cão","animal_type":"Golden Retriever","fur_type":"Longo","dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T21:02:40.293Z","nenabled":true}}}},"404":{"description":"The pet was not found"}}}},"/pet/updateWithList":{"put":{"summary":"Updates list of pets with given input array","tags":["Pets"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Pet"},{"type":"object","required":["id"],"properties":{"id":{"type":"integer","description":"The ID of the pet to update"}}}]}},"example":[{"id":1,"name":"Bolinha","species":"Cão","animal_type":"Pug","fur_type":"Curto","birth_date":"2022-01-15","tutor_id":1}]}}},"responses":{"200":{"description":"The list of pets was successfully updated."},"404":{"description":"One or more pets were not found"},"500":{"description":"Some server error"}}}},"/pet/deleteWithList":{"delete":{"summary":"Deletes a list of pets","tags":["Pets"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"ids":{"type":"array","items":{"type":"integer"}}},"example":{"ids":[1,2,3]}}}}},"responses":{"204":{"description":"The pets were successfully deleted."},"500":{"description":"Some server error"}}}},"/pet/{id}/recommendations/ignore-all":{"put":{"summary":"Ignore all recommendations for a pet","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"responses":{"200":{"description":"All recommendations ignored."},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}}},"/pet/{id}/recommendations/booking":{"get":{"summary":"Finds booking recommendations by id","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of booking recommendations.","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"booking_recommendation_id":{"type":"integer"},"pet_id":{"type":"integer"},"suggested_date":{"type":"string","format":"date-time"},"average_frequency_days":{"type":"integer"},"ignore_recommendation":{"type":"boolean"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"},"pet_name":{"type":"string"},"tutor_name":{"type":"string"}}}},"pagination":{"$ref":"#/components/schemas/PaginatedResponse"}}},"example":{"data":[{"booking_recommendation_id":1,"pet_id":1,"suggested_date":"2025-11-09T03:00:00.000Z","average_frequency_days":5,"ignore_recommendation":false,"dcreated":"2025-11-03T20:41:19.914Z","dlastupdate":"2025-11-03T20:41:19.914Z"}],"pagination":{"page":1,"pageSize":10,"total":1}}}}},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}},"delete":{"summary":"Disables a booking recommendation for a pet","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"}],"responses":{"204":{"description":"The booking recommendation was successfully disabled."},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}}},"/pet/{id}/recommendations/vaccine":{"get":{"summary":"Finds vaccine recommendations by id","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of vaccine recommendations.","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"vaccine_recommendation_id":{"type":"integer"},"pet_id":{"type":"integer"},"vaccine_reference_id":{"type":"integer"},"vaccine_name":{"type":"string"},"description":{"type":"string"},"mandatory":{"type":"boolean"},"suggested_date":{"type":"string","format":"date-time"},"ignore_recommendation":{"type":"boolean"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"},"pet_name":{"type":"string"},"tutor_name":{"type":"string"}}}},"pagination":{"$ref":"#/components/schemas/PaginatedResponse"}}},"example":{"data":[{"vaccine_recommendation_id":1,"pet_id":1,"vaccine_reference_id":1,"vaccine_name":"Aplicação de Microchip","description":"Registro de aplicação de microchip de identificação.","mandatory":false,"suggested_date":"2026-01-03T03:00:00.000Z","ignore_recommendation":false,"dcreated":"2025-11-03T20:12:38.057Z","dlastupdate":"2025-11-03T20:12:38.057Z","nenabled":true,"pet_name":"Bidu","tutor_name":"Ana Carolina"}],"pagination":{"page":1,"pageSize":10,"total":5}}}}},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}}},"/pet/{id}/recommendations/vaccine/{vaccineName}":{"delete":{"summary":"Disables a specific vaccine recommendation for a pet","tags":["Pets"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The pet id"},{"in":"path","name":"vaccineName","schema":{"type":"string"},"required":true,"description":"The name of the vaccine"}],"responses":{"204":{"description":"The vaccine recommendation was successfully disabled."},"404":{"description":"The pet was not found."},"500":{"description":"Some server error"}}}},"/tutor":{"get":{"summary":"Returns the list of all the tutors","tags":["Tutors"],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"The list of the tutors","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponse"},{"type":"object","properties":{"data":{"items":{"$ref":"#/components/schemas/Tutor"}}}}]}}}},"400":{"description":"Erro de validação","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"401":{"description":"Não autorizado","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"403":{"description":"Acesso proibido","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}},"500":{"description":"Erro interno do servidor","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Error"}}}}}},"post":{"summary":"Create a new tutor","tags":["Tutors"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"}}}},"responses":{"201":{"description":"The tutor was successfully created","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"}}}},"500":{"description":"Some server error"}}}},"/tutor/{id}":{"get":{"summary":"Get the tutor by id","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"}],"responses":{"200":{"description":"The tutor description by id","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"},"example":{"tutor_id":1,"name":"Ana Carolina","email":"ana.carolina@email.com","phone":"55 91234-5678","organization_id":1,"dcreated":"2025-11-03T20:10:22.337Z","dlastupdate":"2025-11-03T20:10:22.337Z","nenabled":true}}}},"404":{"description":"The tutor was not found"}}},"put":{"summary":"Update the tutor by the id","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"}}}},"responses":{"200":{"description":"The tutor was updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Tutor"}}}},"404":{"description":"The tutor was not found"},"500":{"description":"Some error happened"}}},"delete":{"summary":"Remove the tutor by id","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"}],"responses":{"204":{"description":"The tutor was deleted"},"404":{"description":"The tutor was not found"}}}},"/tutor/createWithList":{"post":{"summary":"Creates list of tutors with given input array","tags":["Tutors"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Tutor"}}}}},"responses":{"201":{"description":"The list of tutors was successfully created."},"500":{"description":"Some server error"}}}},"/tutor/updateWithList":{"put":{"summary":"Updates list of tutors with given input array","tags":["Tutors"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"array","items":{"allOf":[{"$ref":"#/components/schemas/Tutor"},{"type":"object","required":["id"],"properties":{"id":{"type":"integer","description":"The ID of the tutor to update"}}}]}},"example":[{"id":1,"name":"João da Silva","email":"joao.silva@example.com","phone":"11999999999"}]}}},"responses":{"200":{"description":"The list of tutors was successfully updated."},"404":{"description":"One or more tutors were not found"},"500":{"description":"Some server error"}}}},"/tutor/deleteWithList":{"delete":{"summary":"Deletes a list of tutors","tags":["Tutors"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"ids":{"type":"array","items":{"type":"integer"}}},"example":{"ids":[1,2,3]}}}}},"responses":{"204":{"description":"The tutors were successfully deleted."},"500":{"description":"Some server error"}}}},"/tutor/notify-all":{"post":{"summary":"Notifica todos os tutores sobre as recomendações pendentes de seus pets","tags":["Tutors"],"description":"Inicia um processo em background para enviar notificações (Email, SMS, Push) para todos os tutores que possuem recomendações ativas para seus pets.","responses":{"202":{"description":"Processo de notificação iniciado com sucesso.","content":{"application/json":{"schema":{"type":"object","properties":{"message":{"type":"string","example":"Processo de notificação para todos os tutores foi iniciado."}}}}}}}}},"/tutor/{id}/booking-recommendations":{"get":{"summary":"Get booking recommendations for all pets of a tutor","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of booking recommendations","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"booking_recommendation_id":{"type":"integer"},"pet_id":{"type":"integer"},"suggested_date":{"type":"string","format":"date-time"},"average_frequency_days":{"type":"integer"},"ignore_recommendation":{"type":"boolean"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"},"pet_name":{"type":"string"}}}},"pagination":{"$ref":"#/components/schemas/PaginatedResponse"}}},"example":{"data":[{"booking_recommendation_id":1,"pet_id":1,"suggested_date":"2025-11-09T03:00:00.000Z","average_frequency_days":5,"ignore_recommendation":false,"dcreated":"2025-11-03T20:41:19.914Z","dlastupdate":"2025-11-03T20:41:19.914Z","nenabled":true,"pet_name":"Bidu"}],"pagination":{"page":1,"pageSize":10,"total":1}}}}},"400":{"description":"Bad request"}}}},"/tutor/{id}/vaccine-recommendations":{"get":{"summary":"Get vaccine recommendations for all pets of a tutor","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"},{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"The page number to retrieve."},{"in":"query","name":"pageSize","schema":{"type":"integer","default":10},"description":"The number of items to retrieve per page."}],"responses":{"200":{"description":"A list of vaccine recommendations","content":{"application/json":{"schema":{"type":"object","properties":{"data":{"type":"array","items":{"type":"object","properties":{"vaccine_recommendation_id":{"type":"integer"},"pet_id":{"type":"integer"},"vaccine_reference_id":{"type":"integer"},"vaccine_name":{"type":"string"},"description":{"type":"string"},"mandatory":{"type":"boolean"},"suggested_date":{"type":"string","format":"date-time"},"ignore_recommendation":{"type":"boolean"},"dcreated":{"type":"string","format":"date-time"},"dlastupdate":{"type":"string","format":"date-time"},"nenabled":{"type":"boolean"},"pet_name":{"type":"string"}}}},"pagination":{"$ref":"#/components/schemas/PaginatedResponse"}}},"example":{"data":[{"vaccine_recommendation_id":1,"pet_id":1,"vaccine_reference_id":1,"vaccine_name":"Aplicação de Microchip","description":"Registro de aplicação de microchip de identificação.","mandatory":false,"suggested_date":"2026-01-03T03:00:00.000Z","ignore_recommendation":false,"dcreated":"2025-11-03T20:12:38.057Z","dlastupdate":"2025-11-03T20:12:38.057Z","nenabled":true,"pet_name":"Bidu"}],"pagination":{"page":1,"pageSize":10,"total":5}}}}},"400":{"description":"Bad request"}}}},"/tutor/{id}/update-recommendation":{"post":{"summary":"Update recommendations for all pets of a tutor","tags":["Tutors"],"parameters":[{"in":"path","name":"id","schema":{"type":"integer"},"required":true,"description":"The tutor id"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"ignore":{"type":"boolean"}}}}}},"responses":{"200":{"description":"The pets were updated"},"400":{"description":"Bad request"},"404":{"description":"Tutor not found or no pets to update."}}}}},"tags":[{"name":"ApiKeys","description":"The API keys managing API"},{"name":"Batch","description":"The batch processing API"},{"name":"Organizations","description":"The organizations managing API"},{"name":"Pets","description":"The pets managing API"},{"name":"Tutors","description":"The tutors managing API"}]}